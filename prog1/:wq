#include "Deck.h"
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <array>
using namespace std;

Deck::Deck() : top(0) {
	array<char, 13> ranks = {'2', '3', '4', '5', '6', '7', '8', '9','T', 'J', 'Q', 'K', 'A'};
	array<char, 4> suits = {'S', 'H', 'C', 'D'};

	int index = 0;
	for (int suit = 0; suit < 4; suit++) {
    	for (int rank = 0; rank < 13; rank++) {
        	deck[index] = Card(ranks[rank], suits[suit]);
        	index++;
    	}
	}
}

Card Deck::deal() {
	if (top < 52) {
    	return deck[top++];
	} else {
    	throw out_of_range("No more cards to deal");
	}
}

void Deck::print() {
	for (int i = 0; i < 52; i++) {
    	deck[i].print();

    	if (i == 12 || i == 25 || i == 38 || i == 51) {
        	cout << endl;
    	} else if (i != 51) {
        	cout << ", ";
    	}
	}
	cout << endl;
}

void Deck::shuffle() {
	srand(time(nullptr));
	for (int i = 0; i < 52; i++) {
    	int randPos = rand() % 52;
    	swap(deck[i], deck[randPos]);
	}
}

